class QI{async sendMessage(e,t,n,o){try{return new Promise((r,a)=>{(null==n||n.length<=0)&&a("Bạn chưa nhập tin nhắn !");let l=new Date;l=l.toLocaleDateString("vi-Vi",{minute:"2-digit",second:"2-digit",hour:"2-digit",weekday:"long",year:"numeric",month:"long",day:"numeric"}),e.send(JSON.stringify({id:t,name:o,message:n.trim(),date:l})),r("sent")}).catch(console.log)}catch(e){console.log(e)}}async newMessage(e,t,n){try{n=document.querySelector(n);let o=document.createElement("div");o.className=`sender ${e.id==t?"me":"other"}`,o.textContent=e.message,n.appendChild(o),n.scrollBy(0,window.innerHeight)}catch(e){console.log(e)}}setIdAndName(e){(null==e||e.length<=0)&&(e="Tôi Dại Dột");let t=(Math.random()+1).toString(36).substring(2);return localStorage.setItem("id",t),localStorage.setItem("name",e),t}async covertData(e){try{return e=await e.text(),JSON.parse(e)}catch(e){console.log(e)}}getName(e,t){return!!(t=document.querySelector(t))&&(t.textContent=e.toUpperCase(),!0)}}async function getImg(e="img.FFVAD"){try{let t;if(document.querySelectorAll(e))return await new Promise((n,o)=>{let r=t;const a=setInterval(()=>{document.querySelector("svg.By4nA")||(n(r),clearInterval(a));let t=[...document.querySelectorAll(e)];r=t.map(e=>{let t=e.getAttribute("srcset");if(t)return t=(t=t.split(","))[t.length-1].split(" ")[0]}),window.scrollBy(0,window.innerHeight)},500)})}catch(e){return console.log(`Error loopImg: ${e.message}`),e}}async function getBase64(e=[]){try{let t=e,n=[];if(t)return await new Promise((e,o)=>{let r=n;t.forEach(n=>{let o=new Image;o.crossOrigin="Anonymous",o.onload=(()=>{let n=document.createElement("canvas");n.height=o.height,n.width=o.width,n.getContext("2d").drawImage(o,0,0);let a=n.toDataURL("image/jpeg");!r.includes(a)&&r.push(a),r.length==t.length&&e(r)}),o.src=n})})}catch(e){return console.log(`Error base64: ${e.message}`),e}}(async()=>{try{const e=await getImg(".FFVAD"),t=await getBase64(e);console.log(t)}catch(e){console.log(e)}})();const listImage=new Promise((e,t)=>{});
